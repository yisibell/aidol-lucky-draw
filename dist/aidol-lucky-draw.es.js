function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=o(t);if(e){var a=o(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return s(this,i)}}function h(t,e,i){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(i):a.value}})(t,e,i||t)}var u=function(){function e(){t(this,e)}return i(e,[{key:"IsPC",value:function(){for(var t=navigator.userAgent,e=!0,i=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=0;n<i.length;n++)if(t.indexOf(i[n])>0){e=!1;break}return e}},{key:"easeOut",value:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},{key:"windowToCanvas",value:function(t,e){var i=t.getBoundingClientRect(),n=this.IsPC()?e.clientX||event.clientX:e.changedTouches[0].clientX,o=this.IsPC()?e.clientY||event.clientY:e.changedTouches[0].clientY;return{x:n-i.left,y:o-i.top}}},{key:"drawText",value:function(t,e,i,n,o){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,s=e.split(""),r="",h=[],u=0;u<s.length;u++)t.measureText(r).width>=o&&(h.push(r),r=""),r+=s[u];h.push(r);for(var c=0;c<h.length;c++)t.fillText(h[c],i,n+(c+1)*a)}},{key:"roundedRect",value:function(t,e,i,n,o,a){n>0?t.moveTo(e+a,i):t.moveTo(e-a,i),t.arcTo(e+n,i,e+n,i+o,a),t.arcTo(e+n,i+o,e,i+o,a),t.arcTo(e,i+o,e,i,a),n>0?t.arcTo(e,i,e+a,i,a):t.arcTo(e,i,e-a,i,a)}}]),e}();function c(t){return t&&t.nodeType===Node.ELEMENT_NODE}var d=function(e){n(s,u);var a=r(s);function s(e,i){var n;return t(this,s),(n=a.call(this)).canvas=c(e)?e:document.querySelector(e),n.ctx=n.canvas.getContext("2d"),n.centerX=n.canvas.width/2,n.centerY=n.canvas.height/2,n.outsideRadius=i.outsideRadius||n.centerX-50,n.evenColor=i.evenColor||"#FF6766",n.oddColor=i.oddColor||"#FD5757",n.loseColor=i.loseColor||"#F79494",n.textColor=i.textColor||"White",n.arrowColorFrom=i.arrowColorFrom||"#FFFC95",n.arrowColorTo=i.arrowColorTo||"#FF9D37",n.buttonFont=i.buttonFont||"START",n.buttonFontColor=i.buttonFontColor||"#88411F",n.buttonColorFrom=i.buttonColorFrom||"#FDC964",n.buttonColorTo=i.buttonColorTo||"#FFCB65",n.startRadian=i.startRadian||0,n.cylinderNumber=i.cylinderNumber||6,n.duration=i.duration||5e3,n.awards=i.awards,n.finish=i.finish,n.fetchAward=i.fetchAward,n.animation=i.animation,n.beforeStart=i.beforeStart||function(t){t()},n.INSIDE_RADIUS=0,n.TEXT_RADIAS=.8*n.outsideRadius,n.FONT_STYLE="bold ".concat(.07*n.outsideRadius,"px Helvetica, Arial"),n.ARROW_RADIUS=n.outsideRadius/3,n.BUTTON_RADIUS=.8*n.ARROW_RADIUS,n.AWARDS_COUNT=n.awards.length,n.AWARD_RADIAN=2*Math.PI/n.AWARDS_COUNT,n._isAnimate=!1,n._spinningRadian=n.startRadian,n._spinningTime=0,n._spinTotalTime=0,n._spinningBegin=0,n._spinningChange=0,n._canvasStyle="",n._awardedIndex=0,n.canvas&&n.ctx&&n.render(),n}return i(s,[{key:"draw",value:function(){var t=this,e=this.ctx;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.save();var i=this.oddColor.replace("#",""),n=parseInt(i[0]+i[1],16),a=parseInt(i[2]+i[3],16),r=parseInt(i[4]+i[5],16);e.fillStyle="rgba(".concat(n,", ").concat(a,", ").concat(r,", .72)"),e.shadowColor="rgba(0, 0, 0, .24)",e.shadowOffsetX=0,e.shadowOffsetY=5,e.shadowBlur=15,e.arc(this.centerX,this.centerY,this.outsideRadius,0,2*Math.PI,!1),e.fill(),e.restore();for(var u=function(i){e.save(),"losing"===t.awards[i].type?e.fillStyle=t.loseColor:e.fillStyle=i%2==0?t.evenColor:t.oddColor;var n=t._spinningRadian+t.AWARD_RADIAN*i,o=n+t.AWARD_RADIAN;if(e.beginPath(),e.arc(t.centerX,t.centerY,t.outsideRadius-5,n,o,!1),e.arc(t.centerX,t.centerY,t.INSIDE_RADIUS,o,n,!0),e.fill(),e.restore(),"image"===t.awards[i].type){var a=function(t,e){var i=Math.sin(t.AWARD_RADIAN)*t.outsideRadius/2.5;e.save(),e.translate(t.centerX+Math.cos(n+t.AWARD_RADIAN/2)*t.TEXT_RADIAS,t.centerY+Math.sin(n+t.AWARD_RADIAN/2)*t.TEXT_RADIAS),e.rotate(n+t.AWARD_RADIAN/2+Math.PI/2),e.drawImage(r,-i/2,0,i,i),e.restore()},s=t,r=new Image;r.src=t.awards[i].content,r.complete?a(s,e):r.onload=function(t){a(s,e)}}else if("text"===t.awards[i].type||"losing"===t.awards[i].type){var h=t.awards[i].content;e.save(),e.fillStyle=t.textColor,e.font=t.FONT_STYLE,e.translate(t.centerX+Math.cos(n+t.AWARD_RADIAN/2)*t.TEXT_RADIAS,t.centerY+Math.sin(n+t.AWARD_RADIAN/2)*t.TEXT_RADIAS),e.rotate(n+t.AWARD_RADIAN/2+Math.PI/2),e.fillText(h,-e.measureText(h).width/2,0),e.restore()}},c=0;c<this.AWARDS_COUNT;c++)u(c);var d=this.centerX,l=this.centerY-this.ARROW_RADIUS+5;e.save(),e.fillStyle=this.arrowColorFrom,e.beginPath(),e.moveTo(d,l),e.lineTo(d-15,l),e.lineTo(d,l-30),e.closePath(),e.fill(),e.restore(),e.save(),e.fillStyle=this.arrowColorTo,e.beginPath(),e.moveTo(d,l),e.lineTo(d+15,l),e.lineTo(d,l-30),e.closePath(),e.fill(),e.restore();var _=e.createLinearGradient(this.centerX-this.ARROW_RADIUS,this.centerY-this.ARROW_RADIUS,this.centerX-this.ARROW_RADIUS,this.centerY+this.ARROW_RADIUS);e.save(),_.addColorStop(0,this.arrowColorFrom),_.addColorStop(1,this.arrowColorTo),e.fillStyle=_,e.shadowColor="rgba(0, 0, 0, .12)",e.shadowOffsetX=0,e.shadowOffsetY=5,e.shadowBlur=15,e.beginPath(),e.arc(this.centerX,this.centerY,this.ARROW_RADIUS,0,2*Math.PI,!1),e.fill(),e.restore();var T=e.createLinearGradient(this.centerX-this.BUTTON_RADIUS,this.centerY-this.BUTTON_RADIUS,this.centerX-this.BUTTON_RADIUS,this.centerY+this.BUTTON_RADIUS);e.save(),T.addColorStop(0,this.buttonColorFrom),T.addColorStop(1,this.buttonColorTo),e.fillStyle=T,e.beginPath(),e.arc(this.centerX,this.centerY,this.BUTTON_RADIUS,0,2*Math.PI,!1),e.fill(),e.restore(),e.save(),e.fillStyle=this.buttonFontColor,e.font="bold ".concat(this.BUTTON_RADIUS/2,"px helvetica"),h(o(s.prototype),"drawText",this).call(this,e,this.buttonFont,this.centerX-this.BUTTON_RADIUS/2-16,this.centerY-this.BUTTON_RADIUS/2+4,this.BUTTON_RADIUS+20,this.BUTTON_RADIUS/2+4),e.restore()}},{key:"rotateWheel",value:function(){var t=this.easingFunc(this._spinningTime,this._spinningBegin,this._spinningChange,this._spinTotalTime);this._spinningRadian=t,this.draw(),this._spinningTime+=10,this._spinningTime<=this._spinTotalTime?window.requestAnimationFrame(this.rotateWheel.bind(this)):(this._isAnimate=!1,this.finish&&this.finish(this._awardedIndex,this.awards))}},{key:"easingFunc",value:function(){for(var t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return this.animation?this.animation.apply(this,i):(t=h(o(s.prototype),"easeOut",this)).call.apply(t,[this].concat(i))}},{key:"luckyDraw",value:function(){var t=this;this.beforeStart((function(e){if(t._isAnimate=!0,t._spinningTime=0,t._spinTotalTime=t.duration,e>=0)t._awardedIndex=e;else{if(!t.fetchAward)throw new Error("if you do not use the beforeStart hook, then fetchAward function is required.");t._awardedIndex=t.fetchAward(t.awards)}if(t._awardedIndex<0||t._awardedIndex>t.awards.length-1)throw new Error("Beyond the scope of awards.");t._spinningChange=t.getAwardedEndRadian(t._awardedIndex,t.awards),t.rotateWheel()}))}},{key:"getEachAwardInitRadian",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=360/t.length,n=i/2;return t.reduce((function(t){var e=t[t.length-1],o=0;return o=e?e+i:n,t.push(o),t}),!e&&this._spinningRadian>0?[this._spinningRadian]:[])}},{key:"getAwardedEndRadian",value:function(t,e){var i=270;return(this.getEachAwardInitRadian(e,!1).map((function(t){return t<i?i-t:t>i?i+(90-(t-i)):t}))[t]+360*this.cylinderNumber)*(Math.PI/180)}},{key:"updateAwards",value:function(t){this.awards=t,this._spinningRadian=this.startRadian,this.draw()}},{key:"btnClickListener",value:function(t){var e=this.ctx;if(!this._isAnimate){var i=h(o(s.prototype),"windowToCanvas",this).call(this,this.canvas,t);e.isPointInPath(i.x,i.y)&&this.luckyDraw(e)}}},{key:"btnMoveListener",value:function(t){var e=this.ctx,i=h(o(s.prototype),"windowToCanvas",this).call(this,this.canvas,t);e.isPointInPath(i.x,i.y)?this.canvas.setAttribute("style","cursor: pointer;".concat(this._canvasStyle)):this.canvas.setAttribute("style",this._canvasStyle)}},{key:"destroy",value:function(){var t=this;["touchstart","mousedown"].forEach((function(e){t.canvas.removeEventListener(e,t.btnClickListener)})),this.canvas.removeEventListener("mousemove",this.btnMoveListener)}},{key:"render",value:function(){var t=this;this.destroy(),this._canvasStyle=this.canvas.getAttribute("style")||"",this.draw(),["touchstart","mousedown"].forEach((function(e){t.canvas.addEventListener(e,t.btnClickListener.bind(t))})),this.canvas.addEventListener("mousemove",this.btnMoveListener.bind(this))}}]),s}(),l=function(e){n(s,u);var a=r(s);function s(e,i){var n;return t(this,s),(n=a.call(this)).canvas=c(e)?e:document.querySelector(e),n.ctx=n.canvas.getContext("2d"),n.awards=i.awards,n.sudokuSize=i.sudokuSize||n.canvas.width,n.sudokuItemRadius=i.sudokuItemRadius||8,n.sudokuItemUnactiveColor=i.sudokuItemUnactiveColor||"rgb(255, 235, 236)",n.sudokuItemUnactiveTxtColor=i.sudokuItemUnactiveTxtColor||"rgb(48, 44, 43)",n.sudokuItemUnactiveShadowColor=i.sudokuItemUnactiveShadowColor||"rgb(255, 193, 200)",n.sudokuItemActiveColor=i.sudokuItemActiveColor||"rgb(254, 150, 51)",n.sudokuItemActiveTxtColor=i.sudokuItemActiveTxtColor||"rgb(255, 255, 255)",n.sudokuItemActiveShadowColor=i.sudokuItemActiveShadowColor||"rgb(255, 193, 200)",n.hasButton=i.hasButton||!0,n.buttonFont=i.buttonFont||"START",n.buttonColor=i.buttonColor||"rgb(255, 216, 1)",n.buttonTextColor=i.buttonTextColor||"rgb(172, 97, 1)",n.buttonShadowColor=i.buttonShadowColor||"rgb(253, 177, 1)",n.duration=i.duration||4e3,n.velocity=i.velocity||300,n.finish=i.finish,n.fetchAward=i.fetchAward,n.beforeStart=i.beforeStart||function(t){t()},n.animation=i.animation,n.AWARDS_ROW_LENGTH=Math.floor(n.awards.length/4)+1,n.AWARDS_STEP=n.AWARDS_ROW_LENGTH-1,n.AWARDS_LEN=4*n.AWARDS_STEP,n.LETF_TOP_POINT=0,n.RIGHT_TOP_POINT=n.AWARDS_STEP,n.RIGHT_BOTTOM_POINT=2*n.AWARDS_STEP,n.LEFT_BOTTOM_POINT=2*n.AWARDS_STEP+n.AWARDS_STEP,n.SUDOKU_ITEM_MARGIN=n.sudokuSize/n.AWARDS_ROW_LENGTH/6,n.SUDOKU_ITEM_SIZE=n.sudokuSize/n.AWARDS_ROW_LENGTH-n.SUDOKU_ITEM_MARGIN,n.SUDOKU_ITEM_TEXT_STYLE="bold ".concat(.12*n.SUDOKU_ITEM_SIZE,"px Helvetica"),n.BUTTON_SIZE=n.sudokuSize-(2*n.SUDOKU_ITEM_SIZE+3*n.SUDOKU_ITEM_MARGIN),n.BUTTON_TEXT_STYLE="bold ".concat(.12*n.BUTTON_SIZE,"px Helvetica"),n._positions=[],n._buttonPosition={},n._isAnimate=!1,n._jumpIndex=0,n._jumpingTime=0,n._jumpingTimeStep=100/(n.AWARDS_LEN/8),n._jumpTotalTime,n._jumpChange,n._awardedIndex,n._canvasStyle="",n.canvas&&n.ctx&&n.render(),n}return i(s,[{key:"draw",value:function(){var t=this.ctx;t.clearRect(0,0,t.canvas.width,t.canvas.height);for(var e=this.AWARDS_STEP*this.SUDOKU_ITEM_SIZE+this.AWARDS_STEP*this.SUDOKU_ITEM_MARGIN,i=0;i<this.AWARDS_LEN;i++){if(i>=this.LETF_TOP_POINT&&i<this.RIGHT_TOP_POINT){var n=i,o=n*this.SUDOKU_ITEM_SIZE+n*this.SUDOKU_ITEM_MARGIN;this._positions.push({x:o,y:0}),this.drawSudokuItem(t,o,0,this.SUDOKU_ITEM_SIZE,this.sudokuItemRadius,this.awards[i].type,this.awards[i].content,this.SUDOKU_ITEM_TEXT_STYLE,this.sudokuItemUnactiveTxtColor,this.sudokuItemUnactiveColor,this.sudokuItemUnactiveShadowColor)}if(i>=this.RIGHT_TOP_POINT&&i<this.RIGHT_BOTTOM_POINT){var a=Math.abs(this.AWARDS_STEP-i),s=e,r=a*this.SUDOKU_ITEM_SIZE+a*this.SUDOKU_ITEM_MARGIN;this._positions.push({x:s,y:r}),this.drawSudokuItem(t,s,r,this.SUDOKU_ITEM_SIZE,this.sudokuItemRadius,this.awards[i].type,this.awards[i].content,this.SUDOKU_ITEM_TEXT_STYLE,this.sudokuItemUnactiveTxtColor,this.sudokuItemUnactiveColor,this.sudokuItemUnactiveShadowColor)}if(i>=this.RIGHT_BOTTOM_POINT&&i<this.LEFT_BOTTOM_POINT){var h=Math.abs(2*this.AWARDS_STEP-i),u=Math.abs(h-this.AWARDS_STEP),c=u*this.SUDOKU_ITEM_SIZE+u*this.SUDOKU_ITEM_MARGIN,d=e;this._positions.push({x:c,y:d}),this.drawSudokuItem(t,c,d,this.SUDOKU_ITEM_SIZE,this.sudokuItemRadius,this.awards[i].type,this.awards[i].content,this.SUDOKU_ITEM_TEXT_STYLE,this.sudokuItemUnactiveTxtColor,this.sudokuItemUnactiveColor,this.sudokuItemUnactiveShadowColor)}if(i>=this.LEFT_BOTTOM_POINT){var l=Math.abs(3*this.AWARDS_STEP-i),_=Math.abs(l-this.AWARDS_STEP),T=_*this.SUDOKU_ITEM_SIZE+_*this.SUDOKU_ITEM_MARGIN;this._positions.push({x:0,y:T}),this.drawSudokuItem(t,0,T,this.SUDOKU_ITEM_SIZE,this.sudokuItemRadius,this.awards[i].type,this.awards[i].content,this.SUDOKU_ITEM_TEXT_STYLE,this.sudokuItemUnactiveTxtColor,this.sudokuItemUnactiveColor,this.sudokuItemUnactiveShadowColor)}}}},{key:"drawSudokuItem",value:function(t,e,i,n,a,r,u,c,d,l,_){if(t.save(),t.fillStyle=l,t.shadowOffsetX=0,t.shadowOffsetY=4,t.shadowBlur=0,t.shadowColor=_,t.beginPath(),h(o(s.prototype),"roundedRect",this).call(this,t,e,i,n,n,a),t.fill(),t.restore(),u)if("image"===r){var T=function(){t.drawImage(v,e+.2*n/2,i+.2*n/2,.8*n,.8*n)},v=new Image;v.src=u,v.complete?T():v.onload=function(t){T()}}else"text"!==r&&"losing"!==r||(t.save(),t.fillStyle=d,t.font=c,t.translate(e+this.SUDOKU_ITEM_SIZE/2-t.measureText(u).width/2,i+this.SUDOKU_ITEM_SIZE/2+6),t.fillText(u,0,0),t.restore())}},{key:"drawButton",value:function(){var t=this.ctx,e=this.SUDOKU_ITEM_SIZE+this.SUDOKU_ITEM_MARGIN,i=this.SUDOKU_ITEM_SIZE+this.SUDOKU_ITEM_MARGIN;t.save(),t.fillStyle=this.buttonColor,t.shadowOffsetX=0,t.shadowOffsetY=4,t.shadowBlur=0,t.shadowColor=this.buttonShadowColor,t.beginPath(),h(o(s.prototype),"roundedRect",this).call(this,t,e,i,this.BUTTON_SIZE,this.BUTTON_SIZE,this.sudokuItemRadius,this.buttonColor,this.buttonShadowColor),t.fill(),t.restore(),t.save(),t.fillStyle=this.buttonTextColor,t.font=this.BUTTON_TEXT_STYLE,t.translate(e+this.BUTTON_SIZE/2-t.measureText(this.buttonFont).width/2,i+this.BUTTON_SIZE/2+10),t.fillText(this.buttonFont,0,0),t.restore(),this._buttonPosition={x:e,y:i}}},{key:"createButtonPath",value:function(){var t=this.ctx;t.beginPath(),h(o(s.prototype),"roundedRect",this).call(this,t,this._buttonPosition.x,this._buttonPosition.y,this.BUTTON_SIZE,this.BUTTON_SIZE,this.sudokuItemRadius)}},{key:"sudokuItemMove",value:function(){var t=this.ctx;if(this._isAnimate=!0,this.draw(),this.hasButton&&this.drawButton(),this.drawSudokuItem(t,this._positions[this._jumpIndex].x,this._positions[this._jumpIndex].y,this.SUDOKU_ITEM_SIZE,this.sudokuItemRadius,this.awards[this._jumpIndex].type,this.awards[this._jumpIndex].content,this.SUDOKU_ITEM_TEXT_STYLE,this.sudokuItemActiveTxtColor,this.sudokuItemActiveColor,this.sudokuItemActiveShadowColor),this._jumpIndex<this.AWARDS_LEN-1?this._jumpIndex++:this._jumpIndex>=this.AWARDS_LEN-1&&(this._jumpIndex=0),this._jumpingTime+=this._jumpingTimeStep,this._jumpingTime<=this._jumpTotalTime){var e=this.easingFunc(this._jumpingTime,0,this._jumpChange,this._jumpTotalTime);setTimeout(this.sudokuItemMove.bind(this),e+50)}else this._isAnimate=!1,this.finish&&this.finish(this._awardedIndex,this.awards)}},{key:"luckyDraw",value:function(){var t=this;this.beforeStart((function(e){if(e>=0)t._awardedIndex=e;else{if(!t.fetchAward)throw new Error("if you do not use the beforeStart hook, then fetchAward function is required.");t._awardedIndex=t.fetchAward(t.awards)}if(t._awardedIndex<0||t._awardedIndex>t.awards.length-1)throw new Error("Beyond the scope of awards.");t._jumpIndex=0,t._jumpingTime=0,t._jumpChange=3*Math.random()+t.velocity,t._jumpTotalTime=t.duration+t._jumpingTimeStep*t._awardedIndex,t.sudokuItemMove()}))}},{key:"easingFunc",value:function(){for(var t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return this.animation?this.animation.apply(this,i):(t=h(o(s.prototype),"easeOut",this)).call.apply(t,[this].concat(i))}},{key:"updateAwards",value:function(t){this.awards=t,this.draw()}},{key:"destroy",value:function(){var t=this;["touchstart","mousedown"].forEach((function(e){t.canvas.removeEventListener(e,t.btnClickListener)})),this.canvas.removeEventListener("mousemove",this.btnMoveListener)}},{key:"btnClickListener",value:function(t){var e=this.canvas,i=this.ctx,n=h(o(s.prototype),"windowToCanvas",this).call(this,e,t);this.createButtonPath(),i.isPointInPath(n.x,n.y)&&!this._isAnimate&&this.luckyDraw()}},{key:"btnMoveListener",value:function(t){var e=this.canvas,i=this.ctx,n=h(o(s.prototype),"windowToCanvas",this).call(this,e,t);this.createButtonPath(),i.isPointInPath(n.x,n.y)?e.setAttribute("style","cursor: pointer;".concat(this._canvasStyle)):e.setAttribute("style",this._canvasStyle)}},{key:"render",value:function(){var t=this;this.destroy();var e=this.canvas;this._canvasStyle=e.getAttribute("style")||"",this.draw(),this.hasButton&&(this.drawButton(),["mousedown","touchstart"].forEach((function(i){e.addEventListener(i,t.btnClickListener.bind(t))})),e.addEventListener("mousemove",this.btnMoveListener.bind(this)))}}]),s}(),_=function(e){n(s,u);var a=r(s);function s(e,i){var n;return t(this,s),(n=a.call(this)).canvas=c(e)?e:document.querySelector(e),n.ctx=n.canvas.getContext("2d"),n.style=i.style,n.awardBackgroundImage=i.awardBackgroundImage,n.eraserSize=i.eraserSize||15,n.coverColor=i.coverColor||"#b5b5b5",n._dragging=!1,n.canvas&&n.ctx&&n.render(),n}return i(s,[{key:"drawCover",value:function(){var t=this.ctx;t.save(),t.fillStyle=this.coverColor,t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.fill(),t.restore()}},{key:"drawEraser",value:function(t,e){t.save(),t.beginPath(),t.arc(e.x,e.y,this.eraserSize,0,2*Math.PI,!1),t.clip(),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()}},{key:"drawAwardBackgroundImage",value:function(){this.canvas.setAttribute("style","background: url(".concat(this.awardBackgroundImage,") no-repeat center / cover;").concat(this.style))}},{key:"render",value:function(){var t=this,e=this.canvas,i=this.ctx;this.drawCover(),this.drawAwardBackgroundImage(e),["touchstart","mousedown"].forEach((function(n){e.addEventListener(n,(function(n){var a=h(o(s.prototype),"windowToCanvas",t).call(t,e,n);t._dragging=!0,t.drawEraser(i,a)}))})),["touchmove","mousemove"].forEach((function(n){e.addEventListener(n,(function(n){var a;t._dragging&&(a=h(o(s.prototype),"windowToCanvas",t).call(t,e,n),t.drawEraser(i,a))}))})),["touchend","mouseup"].forEach((function(i){e.addEventListener(i,(function(e){t._dragging=!1}))}))}}]),s}();export{_ as LuckyScratchCard,l as LuckySudoku,d as LuckyWheel};
